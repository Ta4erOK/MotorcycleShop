# Техническое задание: Motorcycle-Shop

**Студент:** Агиенко Данил Алексеевич

**Группа:** 2307в2

---

## 1. Описание проекта

### 1.1 Название системы
Система продажи мотоциклов "MotoMarket"


### 1.2 Назначение
Система предназначена для онлайн-продажи мотоциклов. Позволяет пользователям просматривать каталог мотоциклов, выбирать товары, оформлять заказы и производить оплату.


---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Просмотр каталога мотоциклов
- **Описание:** 
Пользователь может просматривать каталог доступных мотоциклов с возможностью фильтрации по различным параметрам,включая поиск мотоциклов по ключевым словам. Система отображает подробную информацию о каждом мотоцикле: фотографии, технические характеристики, цену и статус доступности.
- **Входные данные:**
Параметры фильтрации: марка, модель, год выпуска, цена, объем двигателя.
Сортировка: по цене, году выпуска, объему двигателя.
Поисковый запрос (строка текста).
- **Результат:** 
Отфильтрованный и отсортированный список мотоциклов,соответствующих поисковому запросу,с полной информацией о каждом.

#### Функция 2: Добавление в корзину
- **Описание:** 
Пользователь может добавлять понравившиеся мотоциклы в корзину для последующего оформления заказа. Система сохраняет выбранные товары в сессии пользователя.
- **Входные данные:**
Выбранный мотоцикл (ID), количество (по умолчанию 1).
- **Результат:** 
Корзина с выбранными товарами, обновленная сумма заказа.


 #### Функция 3: Оформление заказа
- **Описание:** 
 Пользователь оформляет заказ на выбранные мотоциклы. Система запрашивает контактные данные, адрес доставки и создает заказ в статусе "Ожидает оплаты".
- **Входные данные:**
ФИО покупателя, email, телефон, адрес доставки, комментарий к заказу.
- **Результат:** 
Созданный заказ с уникальным номером, статус заказа "Ожидает оплаты".

 #### Функция 4: Оплата заказа
- **Описание:** 
Пользователь оплачивает заказ банковской картой. Система проверяет корректность данных карты, обрабатывает платеж и изменяет статус заказа на "Оплачен" при успешной оплате.
- **Входные данные:**
Данные банковской карты: номер, срок действия, CVV код, имя владельца.
- **Результат:** 
Обработанный платеж, измененный статус заказа, электронный чек.

#### Функция 5: Отслеживание статуса заказа
- **Описание:**
Система отображает заказы, их текущий статус и историю изменений.
- **Результат:** 
Информация о текущем статусе заказа, дата создания, ожидаемая дата доставки.

---

## 3. Структура базы данных

### Таблица 1: Motorcycles (Мотоциклы)

**Описание:** 
Описание: Хранит информацию о мотоциклах в каталоге

- `Id`(int, PK) — уникальный идентификатор мотоцикла
- `Brand` (string) — марка мотоцикла (Yamaha, Honda, Kawasaki, etc.)
- `Model` (string) — модель мотоцикла
- `Year` (int) — год выпуска
- `Color` (string) — цвет
- `EngineVolume` (decimal) — объем двигателя (см³)
- `Mileage` (int) — пробег (км)
- `Price` (decimal) — цена
- `Description` (string?) — описание мотоцикла
- `ImageUrl` (string?) — URL изображения
- `InStock` (bool) — доступен ли для заказа
- `CreatedAt` (DateTime) — дата добавления в каталог

**Связи:**
- Связь один-ко-многим с таблицей OrderItems (один мотоцикл может быть в нескольких заказах)

### Таблица 2: Orders (Заказы)

**Описание:** 
Хранит информацию о заказах пользователей

**Поля:**

- `Id` (int, PK) — уникальный идентификатор заказа
- `OrderNumber` (string) — номер заказа для отслеживания
- `CustomerName` (string) — ФИО покупателя
- `CustomerEmail` (string) — email покупателя
- `CustomerPhone` (string) — телефон покупателя
- `DeliveryAddress` (string) — адрес доставки
- `OrderDate` (DateTime) — дата создания заказа
- `TotalAmount` (decimal) — общая сумма заказа
- `Status` (string) — статус заказа ("Ожидает оплаты", "Оплачен", "В обработке", "Доставляется", "Завершен")
- `Comments` (string?) — комментарии к заказу

**Связи:**
- Связь один-ко-многим с таблицей OrderItems (один заказ содержит несколько позиций)
- Связь один-к-одному с таблицей Payments (один заказ - один платеж)

### Таблица 3: OrderItems (Позиции заказа)

**Описание:** 
Связывает заказы и мотоциклы, хранит информацию о количестве и цене

**Поля:**

- `Id` (int, PK) — уникальный идентификатор позиции
- `OrderId` (int, FK → Orders.Id) — ссылка на заказ
- `MotorcycleId` (int, FK → Motorcycles.Id) — ссылка на мотоцикл
- `Quantity` (int) — количество (обычно 1 для мотоциклов)
- `UnitPrice` (decimal) — цена за единицу на момент заказа

**Связи:**
- FK OrderId → Orders.Id
- FK MotorcycleId → Motorcycles.Id


### Таблица 4: Payments (Платежи)
**Описание:** 
Хранит информацию о платежах по заказам

**Поля:**

- `Id` (int, PK) — уникальный идентификатор платежа
- `OrderId` (int, FK → Orders.Id) — ссылка на заказ
- `PaymentDate` (DateTime) — дата и время платежа
- `Amount` (decimal) — сумма платежа
- `PaymentMethod` (string) — способ оплаты ("Карта")
- `CardLastFour` (string) — последние 4 цифры карты
- `TransactionId` (string?) — идентификатор транзакции платежной системы
- `Status` (string) — статус платежа ("Успешно", "Ошибка", "Ожидает")

**Связи:**
- FK OrderId → Orders.Id

### Таблица 5: ShoppingCart (Корзина)

**Описание:** 
 Хранит информацию о корзине пользователя

**Поля:**

- `Id` (int, PK) — уникальный идентификатор корзины
- `SessionId` (string) — идентификатор сессии пользователя
- `CreatedDate` (DateTime) — дата создания корзины
- `LastModified` (DateTime) — дата последнего изменения
- `TotalAmount` (decimal) — общая сумма товаров в корзине

**Связи:**
- Связь один-ко-многим с таблицей ShoppingCartItems (одна корзина содержит несколько позиций)

### Таблица 6: ShoppingCartItems (Позиции корзины)
**Описание:** 
Связывает корзины и мотоциклы, хранит информацию о количестве

**Поля:**
- `Id` (int, PK) — уникальный идентификатор позиции
- `ShoppingCartId` (int, FK → ShoppingCarts.Id) — ссылка на корзину
- `MotorcycleId` (int, FK → Motorcycles.Id) — ссылка на мотоцикл
- `Quantity` (int) — количество (обычно 1 для мотоциклов)
- `AddedDate` (DateTime) — дата добавления в корзину

**Связи:**
- FK ShoppingCartId → ShoppingCarts.Id
- FK MotorcycleId → Motorcycles.Id

---

## 4. Основные формы приложения

#### Форма 1: MainWindow (Главная форма)

**Назначение:** 
Главная форма приложения с каталогом мотоциклов и навигацией

**Элементы управления:**
- `DataGrid` — отображение списка мотоциклов
- `TextBox` (поиск) — поле для поиска мотоциклов
- `ComboBox` (фильтр по марке) — выбор марки для фильтрации
- `ComboBox` (фильтр по году) — выбор года выпуска
- `NumericUpDown` (мин. цена) — минимальная цена для фильтрации
- `NumericUpDown` (макс. цена) — максимальная цена для фильтрации
- `Button` (корзина) — переход к корзине с отображением количества товаров
- `StatusBar` — отображение статуса приложения

**Действия:**
- Кнопка `"Поиск"` — применение фильтров и поиска
- Кнопка `"Сбросить фильтры"` — очистка всех фильтров
- Кнопка `"Корзина"` — открытие CartWindow
- Двойной клик по мотоциклу в списке — `открытие MotorcycleDetailsWindow`


#### Форма 2: MotorcycleDetailsWindow (Детали мотоцикла)

**Назначение:**
 Просмотр подробной информации о мотоцикле

**Элементы управления:**

- `Image` — изображение мотоцикла
- `TextBlock` (марка и модель) — название мотоцикла
- `TextBlock` (год) — год выпуска
- `TextBlock` (объем двигателя) — объем двигателя
- `TextBlock` (пробег) — пробег
- `TextBlock` (цвет) — цвет
- `TextBlock` (цена) — цена
- `TextBlock` (описание) — подробное описание
- `Button` (в корзину) — добавление в корзину
- `Button` (назад) — возврат к каталогу

**Действия:**
- Кнопка`"В корзину` — добавление текущего мотоцикла в корзину
- Кнопка `"Назад"` — закрытие окна и возврат к каталогу

#### Форма 3: CartWindow (Корзина)

**Назначение:**
Просмотр и редактирование корзины товаров

**Элементы управления:**
- `DataGrid` — список товаров в корзине
- `TextBlock` (общая сумма) — отображение общей стоимости заказа
- `Button` (оформить заказ) — переход к оформлению заказа
- `Button` (удалить) — удаление выбранного товара из корзины
- `Button` (продолжить покупки) — возврат к каталогу

**Действия:**
- Кнопка `"Оформить заказ"` — открытие OrderWindow
- Кнопка `"Удалить"` — удаление выбранного товара из корзины
- Кнопка `"Продолжить покупки"` — закрытие окна и возврат к каталогу

#### Форма 4: OrderWindow (Оформление заказа)

**Назначение:** 
Ввод данных для оформления заказа

**Элементы управления:**
- `TextBox` (ФИО) — ФИО покупателя
- `TextBox` (email) — email покупателя
- `TextBox` (телефон) — телефон покупателя
- `TextBox` (адрес) — адрес доставки
- `TextBox` (комментарий) — комментарий к заказу
- `TextBlock` (сумма заказа) — отображение общей суммы
- `Button` (оплатить) — переход к оплате
- `Button` (назад) — возврат к корзине

**Действия:**
- Кнопка `"Оплатить"` — открытие PaymentWindow
- Кнопка `"Назад"` — возврат к корзине без сохранения




#### Форма 5: PaymentWindow (Оплата заказа)

**Назначение:**
Оплата заказа банковской картой

**Элементы управления:**
- `TextBox` (номер карты) — ввод номера банковской карты (формат: XXXX XXXX XXXX XXXX)
- `TextBox` (срок действия) — ввод срока действия карты (MM/YY)
- `TextBox` (CVV) — ввод CVV кода (3 цифры)
- `TextBox` (владелец карты) — имя владельца карты
- `TextBlock` (сумма к оплате) — отображение суммы платежа
- `Button` (оплатить) — обработка платежа
- `Button` (отмена) — отмена операции оплаты

**Действия:**
- Кнопка `"Оплатить"` — валидация данных карты и обработка платежа
- Кнопка `"Отмена"` — возврат к оформлению заказа без оплаты

#### Форма 6: OrderStatusWindow (Статус заказа)

**Назначение:**
Просмотр статуса заказа

**Элементы управления:**
- `TextBox` (номер заказа) — ввод номера заказа для поиска
- `TextBlock` (статус) — текущий статус заказа
- `TextBlock` (дата заказа) — дата создания заказа
- `TextBlock` (сумма) — сумма заказа
- `TextBlock` (состав заказа) — список мотоциклов в заказе
- `Button` (поиск) — поиск заказа по номеру
- `Button` (новый заказ) — создание нового заказа

**Действия:**
- Кнопка `"Поиск"` — поиск и отображение информации о заказе
- Кнопка `"Новый заказ"` — возврат к главной форме для нового заказа


---

## 5. Схема переходов между формами

**Схема навигации**

***При запуске приложения***

**Запуск** → `MainWindow` (главная форма с каталогом мотоциклов)

#### Из `MainWindow`

Работа с каталогом:

- Двойной клик по мотоциклу в списке → `MotorcycleDetailsWindow` (просмотр деталей)
- **Кнопка "Корзина"** → `CartWindow` (просмотр корзины)
- **Кнопка "Статус заказа"** → `OrderStatusWindow` (проверка статуса заказа)

#### Из `MotorcycleDetailsWindow`
- **Кнопка "В корзину"** → добавление мотоцикла в корзину → возврат на - `MainWindow`
- **Кнопка "Назад"** → возврат на `MainWindow` без добавления

#### Из `CartWindow`
- **Кнопка "Оформить заказ"** → `OrderWindow` (оформление заказа)
- **Кнопка "Удалить"** → удаление товара из корзины → остаёмся на `CartWindow`
- **Кнопка "Продолжить покупки"** → возврат на `MainWindow`

#### Из `OrderWindow`
- **Кнопка "Оплатить"** → `PaymentWindow` (оплата заказа)
- **Кнопка "Назад"** → возврат на `CartWindow` без сохранения заказа

#### Из `PaymentWindow`
- **Кнопка "Оплатить":**

Успешная оплата → сообщение об успехе → `OrderStatusWindow` с номером заказа

Неудачная оплата → сообщение об ошибке → остаёмся на `PaymentWindow`
**Кнопка "Отмена"** → возврат на `OrderWindow` без оплаты

#### Из `OrderStatusWindow`
- **Кнопка "Поиск"** → поиск заказа по номеру → отображение статуса на текущей форме
- **Кнопка "Новый заказ"** → возврат на `MainWindow` для нового заказа


**Диаграмма:**

![Схема переходов](images/navigation-diagram.png)
